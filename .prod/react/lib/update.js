"use strict";function shallowCopy(r){return Array.isArray(r)?r.concat():r&&"object"==typeof r?_assign(new r.constructor,r):r}function invariantArrayCase(r,M,a){Array.isArray(r)?void 0:_prodInvariant("1",a,r);var A=M[a];Array.isArray(A)?void 0:_prodInvariant("2",a,A)}function update(r,M){"object"!=typeof M?_prodInvariant("3",ALL_COMMANDS_LIST.join(", "),COMMAND_SET):void 0;if(hasOwnProperty.call(M,COMMAND_SET)){1!==Object.keys(M).length?_prodInvariant("4",COMMAND_SET):void 0;return M[COMMAND_SET]}var a=shallowCopy(r);if(hasOwnProperty.call(M,COMMAND_MERGE)){var A=M[COMMAND_MERGE];A&&"object"==typeof A?void 0:_prodInvariant("5",COMMAND_MERGE,A);a&&"object"==typeof a?void 0:_prodInvariant("6",COMMAND_MERGE,a);_assign(a,M[COMMAND_MERGE])}if(hasOwnProperty.call(M,COMMAND_PUSH)){invariantArrayCase(r,M,COMMAND_PUSH);M[COMMAND_PUSH].forEach(function(r){a.push(r)})}if(hasOwnProperty.call(M,COMMAND_UNSHIFT)){invariantArrayCase(r,M,COMMAND_UNSHIFT);M[COMMAND_UNSHIFT].forEach(function(r){a.unshift(r)})}if(hasOwnProperty.call(M,COMMAND_SPLICE)){Array.isArray(r)?void 0:_prodInvariant("7",COMMAND_SPLICE,r);Array.isArray(M[COMMAND_SPLICE])?void 0:_prodInvariant("8",COMMAND_SPLICE,M[COMMAND_SPLICE]);M[COMMAND_SPLICE].forEach(function(r){Array.isArray(r)?void 0:_prodInvariant("8",COMMAND_SPLICE,M[COMMAND_SPLICE]);a.splice.apply(a,r)})}if(hasOwnProperty.call(M,COMMAND_APPLY)){"function"!=typeof M[COMMAND_APPLY]?_prodInvariant("9",COMMAND_APPLY,M[COMMAND_APPLY]):void 0;a=M[COMMAND_APPLY](a)}for(var n in M){ALL_COMMANDS_SET.hasOwnProperty(n)&&ALL_COMMANDS_SET[n]||(a[n]=update(r[n],M[n]))}return a}var _prodInvariant=require("./reactProdInvariant"),_assign=require("object-assign"),invariant=require("fbjs/lib/invariant"),hasOwnProperty={}.hasOwnProperty,COMMAND_PUSH="$push",COMMAND_UNSHIFT="$unshift",COMMAND_SPLICE="$splice",COMMAND_SET="$set",COMMAND_MERGE="$merge",COMMAND_APPLY="$apply",ALL_COMMANDS_LIST=[COMMAND_PUSH,COMMAND_UNSHIFT,COMMAND_SPLICE,COMMAND_SET,COMMAND_MERGE,COMMAND_APPLY],ALL_COMMANDS_SET={};ALL_COMMANDS_LIST.forEach(function(r){ALL_COMMANDS_SET[r]=!0});module.exports=update;
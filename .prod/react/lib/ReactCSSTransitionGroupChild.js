"use strict";var React=require("./React"),ReactAddonsDOMDependencies=require("./ReactAddonsDOMDependencies"),CSSCore=require("fbjs/lib/CSSCore"),ReactTransitionEvents=require("./ReactTransitionEvents"),onlyChild=require("./onlyChild"),TICK=17,ReactCSSTransitionGroupChild=React.createClass({displayName:"ReactCSSTransitionGroupChild",propTypes:{name:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.shape({enter:React.PropTypes.string,leave:React.PropTypes.string,active:React.PropTypes.string}),React.PropTypes.shape({enter:React.PropTypes.string,enterActive:React.PropTypes.string,leave:React.PropTypes.string,leaveActive:React.PropTypes.string,appear:React.PropTypes.string,appearActive:React.PropTypes.string})]).isRequired,appear:React.PropTypes.bool,enter:React.PropTypes.bool,leave:React.PropTypes.bool,appearTimeout:React.PropTypes.number,enterTimeout:React.PropTypes.number,leaveTimeout:React.PropTypes.number},transition:function(e,t,s){var i=ReactAddonsDOMDependencies.getReactDOM().findDOMNode(this);if(i){var n=this.props.name[e]||this.props.name+"-"+e,o=this.props.name[e+"Active"]||n+"-active",a=null,r=function(e){if(!e||e.target===i){clearTimeout(a);CSSCore.removeClass(i,n);CSSCore.removeClass(i,o);ReactTransitionEvents.removeEndEventListener(i,r);t&&t()}};CSSCore.addClass(i,n);this.queueClassAndNode(o,i);if(s){a=setTimeout(r,s);this.transitionTimeouts.push(a)}else{ReactTransitionEvents.addEndEventListener(i,r)}}else{t&&t()}},queueClassAndNode:function(e,t){this.classNameAndNodeQueue.push({className:e,node:t});this.timeout||(this.timeout=setTimeout(this.flushClassNameAndNodeQueue,TICK))},flushClassNameAndNodeQueue:function(){this.isMounted()&&this.classNameAndNodeQueue.forEach(function(e){CSSCore.addClass(e.node,e.className)});this.classNameAndNodeQueue.length=0;this.timeout=null},componentWillMount:function(){this.classNameAndNodeQueue=[];this.transitionTimeouts=[]},componentWillUnmount:function(){this.timeout&&clearTimeout(this.timeout);this.transitionTimeouts.forEach(function(e){clearTimeout(e)});this.classNameAndNodeQueue.length=0},componentWillAppear:function(e){this.props.appear?this.transition("appear",e,this.props.appearTimeout):e()},componentWillEnter:function(e){this.props.enter?this.transition("enter",e,this.props.enterTimeout):e()},componentWillLeave:function(e){this.props.leave?this.transition("leave",e,this.props.leaveTimeout):e()},render:function(){return onlyChild(this.props.children)}});module.exports=ReactCSSTransitionGroupChild;
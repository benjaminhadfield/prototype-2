"use strict";function _classCallCheck(e,n){if(!(e instanceof n)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(e,n){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function _inherits(e,n){if("function"!=typeof n&&null!==n){throw new TypeError("Super expression must either be null or a function, not "+typeof n)}e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var _assign=require("object-assign"),React=require("./React"),ReactTransitionChildMapping=require("./ReactTransitionChildMapping"),emptyFunction=require("fbjs/lib/emptyFunction"),ReactTransitionGroup=function(e){function n(){var t,r,i;_classCallCheck(this,n);for(var o=arguments.length,a=Array(o),p=0;p<o;p++){a[p]=arguments[p]}return i=(t=r=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(a))),r.state={children:ReactTransitionChildMapping.getChildMapping(r.props.children)},r.performAppear=function(e){r.currentlyTransitioningKeys[e]=!0;var n=r.refs[e];n.componentWillAppear?n.componentWillAppear(r._handleDoneAppearing.bind(r,e)):r._handleDoneAppearing(e)},r._handleDoneAppearing=function(e){var n=r.refs[e];n.componentDidAppear&&n.componentDidAppear();delete r.currentlyTransitioningKeys[e];var t=ReactTransitionChildMapping.getChildMapping(r.props.children);t&&t.hasOwnProperty(e)||r.performLeave(e)},r.performEnter=function(e){r.currentlyTransitioningKeys[e]=!0;var n=r.refs[e];n.componentWillEnter?n.componentWillEnter(r._handleDoneEntering.bind(r,e)):r._handleDoneEntering(e)},r._handleDoneEntering=function(e){var n=r.refs[e];n.componentDidEnter&&n.componentDidEnter();delete r.currentlyTransitioningKeys[e];var t=ReactTransitionChildMapping.getChildMapping(r.props.children);t&&t.hasOwnProperty(e)||r.performLeave(e)},r.performLeave=function(e){r.currentlyTransitioningKeys[e]=!0;var n=r.refs[e];n.componentWillLeave?n.componentWillLeave(r._handleDoneLeaving.bind(r,e)):r._handleDoneLeaving(e)},r._handleDoneLeaving=function(e){var n=r.refs[e];n.componentDidLeave&&n.componentDidLeave();delete r.currentlyTransitioningKeys[e];var t=ReactTransitionChildMapping.getChildMapping(r.props.children);t&&t.hasOwnProperty(e)?r.performEnter(e):r.setState(function(n){var t=_assign({},n.children);delete t[e];return{children:t}})},t),_possibleConstructorReturn(r,i)}_inherits(n,e);n.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={};this.keysToEnter=[];this.keysToLeave=[]};n.prototype.componentDidMount=function(){var e=this.state.children;for(var n in e){e[n]&&this.performAppear(n)}};n.prototype.componentWillReceiveProps=function(e){var n=ReactTransitionChildMapping.getChildMapping(e.children),t=this.state.children;this.setState({children:ReactTransitionChildMapping.mergeChildMappings(t,n)});var r;for(r in n){var i=t&&t.hasOwnProperty(r);!n[r]||i||this.currentlyTransitioningKeys[r]||this.keysToEnter.push(r)}for(r in t){var o=n&&n.hasOwnProperty(r);!t[r]||o||this.currentlyTransitioningKeys[r]||this.keysToLeave.push(r)}};n.prototype.componentDidUpdate=function(){var e=this.keysToEnter;this.keysToEnter=[];e.forEach(this.performEnter);var n=this.keysToLeave;this.keysToLeave=[];n.forEach(this.performLeave)};n.prototype.render=function(){var e=[];for(var n in this.state.children){var t=this.state.children[n];t&&e.push(React.cloneElement(this.props.childFactory(t),{ref:n,key:n}))}var r=_assign({},this.props);delete r.transitionLeave;delete r.transitionName;delete r.transitionAppear;delete r.transitionEnter;delete r.childFactory;delete r.transitionLeaveTimeout;delete r.transitionEnterTimeout;delete r.transitionAppearTimeout;delete r.component;return React.createElement(this.props.component,r,e)};return n}(React.Component);ReactTransitionGroup.displayName="ReactTransitionGroup";ReactTransitionGroup.propTypes={component:React.PropTypes.any,childFactory:React.PropTypes.func};ReactTransitionGroup.defaultProps={component:"span",childFactory:emptyFunction.thatReturnsArgument};module.exports=ReactTransitionGroup;
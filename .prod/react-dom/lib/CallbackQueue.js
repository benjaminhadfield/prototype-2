"use strict";function _classCallCheck(t,l){if(!(t instanceof l)){throw new TypeError("Cannot call a class as a function")}}var _prodInvariant=require("./reactProdInvariant"),PooledClass=require("./PooledClass"),invariant=require("fbjs/lib/invariant"),CallbackQueue=function(){function t(l){_classCallCheck(this,t);this._callbacks=null;this._contexts=null;this._arg=l}t.prototype.enqueue=function(t,l){this._callbacks=this._callbacks||[];this._callbacks.push(t);this._contexts=this._contexts||[];this._contexts.push(l)};t.prototype.notifyAll=function(){var t=this._callbacks,l=this._contexts,s=this._arg;if(t&&l){t.length!==l.length?_prodInvariant("24"):void 0;this._callbacks=null;this._contexts=null;for(var n=0;n<t.length;n++){t[n].call(l[n],s)}t.length=0;l.length=0}};t.prototype.checkpoint=function(){return this._callbacks?this._callbacks.length:0};t.prototype.rollback=function(t){if(this._callbacks&&this._contexts){this._callbacks.length=t;this._contexts.length=t}};t.prototype.reset=function(){this._callbacks=null;this._contexts=null};t.prototype.destructor=function(){this.reset()};return t}();module.exports=PooledClass.addPoolingTo(CallbackQueue);
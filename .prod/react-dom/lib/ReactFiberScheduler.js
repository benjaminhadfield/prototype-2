"use strict";var ReactFiberBeginWork=require("./ReactFiberBeginWork"),ReactFiberCompleteWork=require("./ReactFiberCompleteWork"),ReactFiberCommitWork=require("./ReactFiberCommitWork"),_require=require("./ReactFiber"),cloneFiber=_require.cloneFiber,_require2=require("./ReactPriorityLevel"),NoWork=_require2.NoWork,LowPriority=_require2.LowPriority,AnimationPriority=_require2.AnimationPriority,SynchronousPriority=_require2.SynchronousPriority,timeHeuristicForUnitOfWork=1;module.exports=function(r){function e(){return W}function i(){for(;E&&E.current.pendingWorkPriority===NoWork;){E.isScheduled=!1;if(E===F){E=null;F=null;v=NoWork;return null}E=E.nextScheduledRoot}for(var r=E,e=null,i=NoWork;r;){if(i===NoWork||i>r.current.pendingWorkPriority){i=r.current.pendingWorkPriority;e=r}r=r.nextScheduledRoot}if(e){v=i;return cloneFiber(e.current,i)}v=NoWork;return null}function o(r){for(var e=r.firstEffect;e;){var i=e.alternate;g(i,e);var o=e.nextEffect;e.nextEffect=null;e=o}}function t(r){for(var e=NoWork,i=r.progressedChild;i;){i.pendingWorkPriority!==NoWork&&(e===NoWork||e>i.pendingWorkPriority)&&(e=i.pendingWorkPriority);i=i.sibling}r.pendingWorkPriority=e}function n(r){for(;;){var e=r.alternate,n=P(e,r);t(r);r.pendingProps=null;r.updateQueue=null;var u=r.return;if(u){u.firstEffect||(u.firstEffect=r.firstEffect);if(r.lastEffect){u.lastEffect&&(u.lastEffect.nextEffect=r.firstEffect);u.lastEffect=r.lastEffect}}if(n){return n}if(r.sibling){return r.sibling}if(!u){var c=r.stateNode;if(c.current===r){throw new Error("Cannot commit the same tree as before. This is probably a bug related to the return field.")}c.current=r;o(r);var f=i();return f}r=u}}function u(r){var e=r.alternate,i=y(e,r,v);return i?i:n(r)}function c(r){R||(R=i());for(;R;){if(!(r.timeRemaining()>timeHeuristicForUnitOfWork)){h(c);return}R=u(R);R||(R=i())}}function f(r,e){e<=v&&(R=null);(r.current.pendingWorkPriority===NoWork||e<=r.current.pendingWorkPriority)&&(r.current.pendingWorkPriority=e);if(!r.isScheduled){r.isScheduled=!0;if(F){F.nextScheduledRoot=r;F=r}else{E=r;F=r;h(c)}}}function l(){R=i();for(;R&&v!==NoWork;){R=u(R);R||(R=i());if(v>AnimationPriority){h(c);return}}}function a(r,e){(r.current.pendingWorkPriority===NoWork||e<=r.current.pendingWorkPriority)&&(r.current.pendingWorkPriority=e);if(!r.isScheduled){r.isScheduled=!0;if(F){F.nextScheduledRoot=r;F=r}else{E=r;F=r;b(l)}}}function d(r){if(N===SynchronousPriority){throw new Error("Not implemented yet")}N!==NoWork&&(N>AnimationPriority?f(r,N):a(r,N))}function k(r,e){var i=N;N=r;try{e()}finally{N=i}}var W=void 0,s=ReactFiberBeginWork(r,e),y=s.beginWork,m=ReactFiberCompleteWork(r),P=m.completeWork,p=ReactFiberCommitWork(r),g=p.commitWork,b=r.scheduleAnimationCallback,h=r.scheduleDeferredCallback,N=LowPriority,R=null,v=NoWork,E=null,F=null;W={scheduleWork:d,scheduleDeferredWork:f,performWithPriority:k};return W};
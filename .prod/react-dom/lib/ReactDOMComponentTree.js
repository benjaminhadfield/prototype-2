"use strict";function shouldPrecacheNode(e,n){return 1===e.nodeType&&e.getAttribute(ATTR_NAME)===String(n)||8===e.nodeType&&e.nodeValue===" react-text: "+n+" "||8===e.nodeType&&e.nodeValue===" react-empty: "+n+" "}function getRenderedHostOrTextFromComponent(e){for(var n;n=e._renderedComponent;){e=n}return e}function precacheNode(e,n){var o=getRenderedHostOrTextFromComponent(e);o._hostNode=n;n[internalInstanceKey]=o}function uncacheNode(e){var n=e._hostNode;if(n){delete n[internalInstanceKey];e._hostNode=null}}function precacheChildNodes(e,n){if(!(e._flags&Flags.hasCachedChildNodes)){var o=e._renderedChildren,t=n.firstChild;e:for(var r in o){if(o.hasOwnProperty(r)){var a=o[r],d=getRenderedHostOrTextFromComponent(a)._domID;if(0!==d){for(;null!==t;t=t.nextSibling){if(shouldPrecacheNode(t,d)){precacheNode(a,t);continue e}}_prodInvariant("32",d)}}}e._flags|=Flags.hasCachedChildNodes}}function getClosestInstanceFromNode(e){if(e[internalInstanceKey]){return e[internalInstanceKey]}for(var n=[];!e[internalInstanceKey];){n.push(e);if(!e.parentNode){return null}e=e.parentNode}for(var o,t;e&&(t=e[internalInstanceKey]);e=n.pop()){o=t;n.length&&precacheChildNodes(t,e)}return o}function getInstanceFromNode(e){var n=getClosestInstanceFromNode(e);return null!=n&&n._hostNode===e?n:null}function getNodeFromInstance(e){void 0===e._hostNode?_prodInvariant("33"):void 0;if(e._hostNode){return e._hostNode}for(var n=[];!e._hostNode;){n.push(e);e._hostParent?void 0:_prodInvariant("34");e=e._hostParent}for(;n.length;e=n.pop()){precacheChildNodes(e,e._hostNode)}return e._hostNode}var _prodInvariant=require("./reactProdInvariant"),DOMProperty=require("./DOMProperty"),ReactDOMComponentFlags=require("./ReactDOMComponentFlags"),invariant=require("fbjs/lib/invariant"),ATTR_NAME=DOMProperty.ID_ATTRIBUTE_NAME,Flags=ReactDOMComponentFlags,internalInstanceKey="__reactInternalInstance$"+Math.random().toString(36).slice(2),ReactDOMComponentTree={getClosestInstanceFromNode:getClosestInstanceFromNode,getInstanceFromNode:getInstanceFromNode,getNodeFromInstance:getNodeFromInstance,precacheChildNodes:precacheChildNodes,precacheNode:precacheNode,uncacheNode:uncacheNode};module.exports=ReactDOMComponentTree;
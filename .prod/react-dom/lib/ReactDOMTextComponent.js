"use strict";var _prodInvariant=require("./reactProdInvariant"),_assign=require("object-assign"),DOMChildrenOperations=require("./DOMChildrenOperations"),DOMLazyTree=require("./DOMLazyTree"),ReactDOMComponentTree=require("./ReactDOMComponentTree"),escapeTextContentForBrowser=require("./escapeTextContentForBrowser"),invariant=require("fbjs/lib/invariant"),validateDOMNesting=require("./validateDOMNesting"),ReactDOMTextComponent=function(e){this._currentElement=e;this._stringText=""+e;this._hostNode=null;this._hostParent=null;this._domID=0;this._mountIndex=0;this._closingComment=null;this._commentNodes=null};_assign(ReactDOMTextComponent.prototype,{mountComponent:function(e,t,n,r){var o=n._idCounter++,i=" react-text: "+o+" ",s=" /react-text ";this._domID=o;this._hostParent=t;if(e.useCreateElement){var a=n._ownerDocument,m=a.createComment(i),c=a.createComment(s),u=DOMLazyTree(a.createDocumentFragment());DOMLazyTree.queueChild(u,DOMLazyTree(m));this._stringText&&DOMLazyTree.queueChild(u,DOMLazyTree(a.createTextNode(this._stringText)));DOMLazyTree.queueChild(u,DOMLazyTree(c));ReactDOMComponentTree.precacheNode(this,m);this._closingComment=c;return u}var h=escapeTextContentForBrowser(this._stringText);return e.renderToStaticMarkup?h:"<!--"+i+"-->"+h+"<!--"+s+"-->"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;if(n!==this._stringText){this._stringText=n;var r=this.getHostNode();DOMChildrenOperations.replaceDelimitedText(r[0],r[1],n)}}},getHostNode:function(){var e=this._commentNodes;if(e){return e}if(!this._closingComment){for(var t=ReactDOMComponentTree.getNodeFromInstance(this),n=t.nextSibling;;){null==n?_prodInvariant("67",this._domID):void 0;if(8===n.nodeType&&" /react-text "===n.nodeValue){this._closingComment=n;break}n=n.nextSibling}}e=[this._hostNode,this._closingComment];this._commentNodes=e;return e},unmountComponent:function(){this._closingComment=null;this._commentNodes=null;ReactDOMComponentTree.uncacheNode(this)}});module.exports=ReactDOMTextComponent;
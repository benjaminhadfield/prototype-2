"use strict";function getDeclarationErrorAddendum(e){if(e){var t=e._currentElement._owner||null;if(t){var r=t.getName();if(r){return" This DOM node was rendered by `"+r+"`."}}}return""}function friendlyStringify(e){if("object"==typeof e){if(Array.isArray(e)){return"["+e.map(friendlyStringify).join(", ")+"]"}var t=[];for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=/^[a-z$_][\w$_]*$/i.test(r)?r:JSON.stringify(r);t.push(n+": "+friendlyStringify(e[r]))}}return"{"+t.join(", ")+"}"}return"string"==typeof e?JSON.stringify(e):"function"==typeof e?"[function object]":String(e)}function checkAndWarnForMutatedStyle(e,t,r){if(null!=e&&null!=t&&!shallowEqual(e,t)){var n,a=r._tag,o=r._currentElement._owner;o&&(n=o.getName());var i=n+"|"+a;styleMutationWarning.hasOwnProperty(i)||(styleMutationWarning[i]=!0)}}function assertValidProps(e,t){if(t){voidElementTags[e._tag]&&(null!=t.children||null!=t.dangerouslySetInnerHTML?_prodInvariant("137",e._tag,e._currentElement._owner?" Check the render method of "+e._currentElement._owner.getName()+".":""):void 0);if(null!=t.dangerouslySetInnerHTML){null!=t.children?_prodInvariant("60"):void 0;"object"==typeof t.dangerouslySetInnerHTML&&HTML in t.dangerouslySetInnerHTML?void 0:_prodInvariant("61")}null!=t.style&&"object"!=typeof t.style?_prodInvariant("62",getDeclarationErrorAddendum(e)):void 0}}function enqueuePutListener(e,t,r,n){if(!(n instanceof ReactServerRenderingTransaction)){var a=e._hostContainerInfo,o=a._node&&a._node.nodeType===DOC_FRAGMENT_TYPE,i=o?a._node:a._ownerDocument;listenTo(t,i);n.getReactMountReady().enqueue(putListener,{inst:e,registrationName:t,listener:r})}}function putListener(){var e=this;EventPluginHub.putListener(e.inst,e.registrationName,e.listener)}function inputPostMount(){var e=this;ReactDOMInput.postMountWrapper(e)}function textareaPostMount(){var e=this;ReactDOMTextarea.postMountWrapper(e)}function optionPostMount(){var e=this;ReactDOMOption.postMountWrapper(e)}function trapBubbledEventsLocal(){var e=this;e._rootNodeID?void 0:_prodInvariant("63");var t=getNode(e);t?void 0:_prodInvariant("64");switch(e._tag){case"iframe":case"object":e._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent("topLoad","load",t)];break;case"video":case"audio":e._wrapperState.listeners=[];for(var r in mediaEvents){mediaEvents.hasOwnProperty(r)&&e._wrapperState.listeners.push(ReactBrowserEventEmitter.trapBubbledEvent(r,mediaEvents[r],t))}break;case"source":e._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent("topError","error",t)];break;case"img":e._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent("topError","error",t),ReactBrowserEventEmitter.trapBubbledEvent("topLoad","load",t)];break;case"form":e._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent("topReset","reset",t),ReactBrowserEventEmitter.trapBubbledEvent("topSubmit","submit",t)];break;case"input":case"select":case"textarea":e._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent("topInvalid","invalid",t)]}}function postUpdateSelectWrapper(){ReactDOMSelect.postUpdateWrapper(this)}function validateDangerousTag(e){if(!hasOwnProperty.call(validatedTagCache,e)){VALID_TAG_REGEX.test(e)?void 0:_prodInvariant("65",e);validatedTagCache[e]=!0}}function isCustomComponent(e,t){return e.indexOf("-")>=0||null!=t.is}function ReactDOMComponent(e){var t=e.type;validateDangerousTag(t);this._currentElement=e;this._tag=t.toLowerCase();this._namespaceURI=null;this._renderedChildren=null;this._previousStyle=null;this._previousStyleCopy=null;this._hostNode=null;this._hostParent=null;this._rootNodeID=0;this._domID=0;this._hostContainerInfo=null;this._wrapperState=null;this._topLevelWrapper=null;this._flags=0}var _prodInvariant=require("./reactProdInvariant"),_assign=require("object-assign"),AutoFocusUtils=require("./AutoFocusUtils"),CSSPropertyOperations=require("./CSSPropertyOperations"),DOMLazyTree=require("./DOMLazyTree"),DOMNamespaces=require("./DOMNamespaces"),DOMProperty=require("./DOMProperty"),DOMPropertyOperations=require("./DOMPropertyOperations"),EventPluginHub=require("./EventPluginHub"),EventPluginRegistry=require("./EventPluginRegistry"),ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter"),ReactDOMComponentFlags=require("./ReactDOMComponentFlags"),ReactDOMComponentTree=require("./ReactDOMComponentTree"),ReactDOMInput=require("./ReactDOMInput"),ReactDOMOption=require("./ReactDOMOption"),ReactDOMSelect=require("./ReactDOMSelect"),ReactDOMTextarea=require("./ReactDOMTextarea"),ReactInstrumentation=require("./ReactInstrumentation"),ReactMultiChild=require("./ReactMultiChild"),ReactServerRenderingTransaction=require("./ReactServerRenderingTransaction"),emptyFunction=require("fbjs/lib/emptyFunction"),escapeTextContentForBrowser=require("./escapeTextContentForBrowser"),invariant=require("fbjs/lib/invariant"),isEventSupported=require("./isEventSupported"),shallowEqual=require("fbjs/lib/shallowEqual"),validateDOMNesting=require("./validateDOMNesting"),warning=require("fbjs/lib/warning"),Flags=ReactDOMComponentFlags,deleteListener=EventPluginHub.deleteListener,getNode=ReactDOMComponentTree.getNodeFromInstance,listenTo=ReactBrowserEventEmitter.listenTo,registrationNameModules=EventPluginRegistry.registrationNameModules,CONTENT_TYPES={string:!0,number:!0},STYLE="style",HTML="__html",RESERVED_PROPS={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},DOC_FRAGMENT_TYPE=11,styleMutationWarning={},setAndValidateContentChildDev=emptyFunction,mediaEvents={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},omittedCloseTags={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},newlineEatingTags={listing:!0,pre:!0,textarea:!0},voidElementTags=_assign({menuitem:!0},omittedCloseTags),VALID_TAG_REGEX=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,validatedTagCache={},hasOwnProperty={}.hasOwnProperty,globalIdCounter=1;ReactDOMComponent.displayName="ReactDOMComponent";ReactDOMComponent.Mixin={mountComponent:function(e,t,r,n){this._rootNodeID=globalIdCounter++;this._domID=r._idCounter++;this._hostParent=t;this._hostContainerInfo=r;var a=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null};e.getReactMountReady().enqueue(trapBubbledEventsLocal,this);break;case"input":ReactDOMInput.mountWrapper(this,a,t);a=ReactDOMInput.getHostProps(this,a);e.getReactMountReady().enqueue(trapBubbledEventsLocal,this);break;case"option":ReactDOMOption.mountWrapper(this,a,t);a=ReactDOMOption.getHostProps(this,a);break;case"select":ReactDOMSelect.mountWrapper(this,a,t);a=ReactDOMSelect.getHostProps(this,a);e.getReactMountReady().enqueue(trapBubbledEventsLocal,this);break;case"textarea":ReactDOMTextarea.mountWrapper(this,a,t);a=ReactDOMTextarea.getHostProps(this,a);e.getReactMountReady().enqueue(trapBubbledEventsLocal,this)}assertValidProps(this,a);var o,i;if(null!=t){o=t._namespaceURI;i=t._tag}else{if(r._tag){o=r._namespaceURI;i=r._tag}}(null==o||o===DOMNamespaces.svg&&"foreignobject"===i)&&(o=DOMNamespaces.html);o===DOMNamespaces.html&&("svg"===this._tag?o=DOMNamespaces.svg:"math"===this._tag&&(o=DOMNamespaces.mathml));this._namespaceURI=o;var s;if(e.useCreateElement){var u,l=r._ownerDocument;if(o===DOMNamespaces.html){if("script"===this._tag){var p=l.createElement("div"),c=this._currentElement.type;p.innerHTML="<"+c+"></"+c+">";u=p.removeChild(p.firstChild)}else{u=a.is?l.createElement(this._currentElement.type,a.is):l.createElement(this._currentElement.type)}}else{u=l.createElementNS(o,this._currentElement.type)}ReactDOMComponentTree.precacheNode(this,u);this._flags|=Flags.hasCachedChildNodes;this._hostParent||DOMPropertyOperations.setAttributeForRoot(u);this._updateDOMProperties(null,a,e);var d=DOMLazyTree(u);this._createInitialChildren(e,a,n,d);s=d}else{var h=this._createOpenTagMarkupAndPutListeners(e,a),g=this._createContentMarkup(e,a,n);s=!g&&omittedCloseTags[this._tag]?h+"/>":h+">"+g+"</"+this._currentElement.type+">"}switch(this._tag){case"input":e.getReactMountReady().enqueue(inputPostMount,this);a.autoFocus&&e.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent,this);break;case"textarea":e.getReactMountReady().enqueue(textareaPostMount,this);a.autoFocus&&e.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent,this);break;case"select":a.autoFocus&&e.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent,this);break;case"button":a.autoFocus&&e.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent,this);break;case"option":e.getReactMountReady().enqueue(optionPostMount,this)}return s},_createOpenTagMarkupAndPutListeners:function(e,t){var r="<"+this._currentElement.type;for(var n in t){if(t.hasOwnProperty(n)){var a=t[n];if(null!=a){if(registrationNameModules.hasOwnProperty(n)){a&&enqueuePutListener(this,n,a,e)}else{if(n===STYLE){a&&(a=this._previousStyleCopy=_assign({},t.style));a=CSSPropertyOperations.createMarkupForStyles(a,this)}var o=null;null!=this._tag&&isCustomComponent(this._tag,t)?RESERVED_PROPS.hasOwnProperty(n)||(o=DOMPropertyOperations.createMarkupForCustomAttribute(n,a)):o=DOMPropertyOperations.createMarkupForProperty(n,a);o&&(r+=" "+o)}}}}if(e.renderToStaticMarkup){return r}this._hostParent||(r+=" "+DOMPropertyOperations.createMarkupForRoot());r+=" "+DOMPropertyOperations.createMarkupForID(this._domID);return r},_createContentMarkup:function(e,t,r){var n="",a=t.dangerouslySetInnerHTML;if(null!=a){null!=a.__html&&(n=a.__html)}else{var o=CONTENT_TYPES[typeof t.children]?t.children:null,i=null!=o?null:t.children;if(null!=o){n=escapeTextContentForBrowser(o)}else{if(null!=i){var s=this.mountChildren(i,e,r);n=s.join("")}}}return newlineEatingTags[this._tag]&&"\n"===n.charAt(0)?"\n"+n:n},_createInitialChildren:function(e,t,r,n){var a=t.dangerouslySetInnerHTML;if(null!=a){null!=a.__html&&DOMLazyTree.queueHTML(n,a.__html)}else{var o=CONTENT_TYPES[typeof t.children]?t.children:null,i=null!=o?null:t.children;if(null!=o){""!==o&&DOMLazyTree.queueText(n,o)}else{if(null!=i){for(var s=this.mountChildren(i,e,r),u=0;u<s.length;u++){DOMLazyTree.queueChild(n,s[u])}}}}},receiveComponent:function(e,t,r){var n=this._currentElement;this._currentElement=e;this.updateComponent(t,n,e,r)},updateComponent:function(e,t,r,n){var a=t.props,o=this._currentElement.props;switch(this._tag){case"input":a=ReactDOMInput.getHostProps(this,a);o=ReactDOMInput.getHostProps(this,o);break;case"option":a=ReactDOMOption.getHostProps(this,a);o=ReactDOMOption.getHostProps(this,o);break;case"select":a=ReactDOMSelect.getHostProps(this,a);o=ReactDOMSelect.getHostProps(this,o);break;case"textarea":a=ReactDOMTextarea.getHostProps(this,a);o=ReactDOMTextarea.getHostProps(this,o)}assertValidProps(this,o);this._updateDOMProperties(a,o,e);this._updateDOMChildren(a,o,e,n);switch(this._tag){case"input":ReactDOMInput.updateWrapper(this);break;case"textarea":ReactDOMTextarea.updateWrapper(this);break;case"select":e.getReactMountReady().enqueue(postUpdateSelectWrapper,this)}},_updateDOMProperties:function(e,t,r){var n,a,o;for(n in e){if(!t.hasOwnProperty(n)&&e.hasOwnProperty(n)&&null!=e[n]){if(n===STYLE){var i=this._previousStyleCopy;for(a in i){if(i.hasOwnProperty(a)){o=o||{};o[a]=""}}this._previousStyleCopy=null}else{registrationNameModules.hasOwnProperty(n)?e[n]&&deleteListener(this,n):isCustomComponent(this._tag,e)?RESERVED_PROPS.hasOwnProperty(n)||DOMPropertyOperations.deleteValueForAttribute(getNode(this),n):(DOMProperty.properties[n]||DOMProperty.isCustomAttribute(n))&&DOMPropertyOperations.deleteValueForProperty(getNode(this),n)}}}for(n in t){var s=t[n],u=n===STYLE?this._previousStyleCopy:null!=e?e[n]:void 0;if(t.hasOwnProperty(n)&&s!==u&&(null!=s||null!=u)){if(n===STYLE){s?s=this._previousStyleCopy=_assign({},s):this._previousStyleCopy=null;if(u){for(a in u){if(u.hasOwnProperty(a)&&(!s||!s.hasOwnProperty(a))){o=o||{};o[a]=""}}for(a in s){if(s.hasOwnProperty(a)&&u[a]!==s[a]){o=o||{};o[a]=s[a]}}}else{o=s}}else{if(registrationNameModules.hasOwnProperty(n)){s?enqueuePutListener(this,n,s,r):u&&deleteListener(this,n)}else{if(isCustomComponent(this._tag,t)){RESERVED_PROPS.hasOwnProperty(n)||DOMPropertyOperations.setValueForAttribute(getNode(this),n,s)}else{if(DOMProperty.properties[n]||DOMProperty.isCustomAttribute(n)){var l=getNode(this);null!=s?DOMPropertyOperations.setValueForProperty(l,n,s):DOMPropertyOperations.deleteValueForProperty(l,n)}}}}}}o&&CSSPropertyOperations.setValueForStyles(getNode(this),o,this)},_updateDOMChildren:function(e,t,r,n){var a=CONTENT_TYPES[typeof e.children]?e.children:null,o=CONTENT_TYPES[typeof t.children]?t.children:null,i=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,s=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,u=null!=a?null:e.children,l=null!=o?null:t.children,p=null!=a||null!=i,c=null!=o||null!=s;null!=u&&null==l?this.updateChildren(null,r,n):p&&!c&&this.updateTextContent("");null!=o?a!==o&&this.updateTextContent(""+o):null!=s?i!==s&&this.updateMarkup(""+s):null!=l&&this.updateChildren(l,r,n)},getHostNode:function(){return getNode(this)},unmountComponent:function(e){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var t=this._wrapperState.listeners;if(t){for(var r=0;r<t.length;r++){t[r].remove()}}break;case"html":case"head":case"body":_prodInvariant("66",this._tag)}this.unmountChildren(e);ReactDOMComponentTree.uncacheNode(this);EventPluginHub.deleteAllListeners(this);this._rootNodeID=0;this._domID=0;this._wrapperState=null},getPublicInstance:function(){return getNode(this)}};_assign(ReactDOMComponent.prototype,ReactDOMComponent.Mixin,ReactMultiChild.Mixin);module.exports=ReactDOMComponent;
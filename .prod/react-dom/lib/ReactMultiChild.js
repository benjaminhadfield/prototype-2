"use strict";function makeInsertMarkup(e,n,t){return{type:"INSERT_MARKUP",content:e,fromIndex:null,fromNode:null,toIndex:t,afterNode:n}}function makeMove(e,n,t){return{type:"MOVE_EXISTING",content:null,fromIndex:e._mountIndex,fromNode:ReactReconciler.getHostNode(e),toIndex:t,afterNode:n}}function makeRemove(e,n){return{type:"REMOVE_NODE",content:null,fromIndex:e._mountIndex,fromNode:n,toIndex:null,afterNode:null}}function makeSetMarkup(e){return{type:"SET_MARKUP",content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function makeTextContent(e){return{type:"TEXT_CONTENT",content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function enqueue(e,n){if(n){e=e||[];e.push(n)}return e}function processQueue(e,n){ReactComponentEnvironment.processChildrenUpdates(e,n)}var _prodInvariant=require("./reactProdInvariant"),ReactComponentEnvironment=require("./ReactComponentEnvironment"),ReactInstanceMap=require("./ReactInstanceMap"),ReactInstrumentation=require("./ReactInstrumentation"),ReactCurrentOwner=require("react/lib/ReactCurrentOwner"),ReactReconciler=require("./ReactReconciler"),ReactChildReconciler=require("./ReactChildReconciler"),emptyFunction=require("fbjs/lib/emptyFunction"),flattenChildren=require("./flattenChildren"),invariant=require("fbjs/lib/invariant"),setChildrenForInstrumentation=emptyFunction,getDebugID,ReactMultiChild={Mixin:{_reconcilerInstantiateChildren:function(e,n,t){return ReactChildReconciler.instantiateChildren(e,n,t)},_reconcilerUpdateChildren:function(e,n,t,r,i,o){var u,a=0;u=flattenChildren(n,a);ReactChildReconciler.updateChildren(e,u,t,r,i,this,this._hostContainerInfo,o,a);return u},mountChildren:function(e,n,t){var r=this._reconcilerInstantiateChildren(e,n,t);this._renderedChildren=r;var i=[],o=0;for(var u in r){if(r.hasOwnProperty(u)){var a=r[u],d=0,l=ReactReconciler.mountComponent(a,n,this,this._hostContainerInfo,t,d);a._mountIndex=o++;i.push(l)}}return i},updateTextContent:function(e){var n=this._renderedChildren;ReactChildReconciler.unmountChildren(n,!1);for(var t in n){n.hasOwnProperty(t)&&_prodInvariant("118")}var r=[makeTextContent(e)];processQueue(this,r)},updateMarkup:function(e){var n=this._renderedChildren;ReactChildReconciler.unmountChildren(n,!1);for(var t in n){n.hasOwnProperty(t)&&_prodInvariant("118")}var r=[makeSetMarkup(e)];processQueue(this,r)},updateChildren:function(e,n,t){this._updateChildren(e,n,t)},_updateChildren:function(e,n,t){var r=this._renderedChildren,i={},o=[],u=this._reconcilerUpdateChildren(r,e,o,i,n,t);if(u||r){var a,d=null,l=0,c=0,h=0,m=null;for(a in u){if(u.hasOwnProperty(a)){var s=r&&r[a],C=u[a];if(s===C){d=enqueue(d,this.moveChild(s,m,l,c));c=Math.max(s._mountIndex,c);s._mountIndex=l}else{s&&(c=Math.max(s._mountIndex,c));d=enqueue(d,this._mountChildAtIndex(C,o[h],m,l,n,t));h++}l++;m=ReactReconciler.getHostNode(C)}}for(a in i){i.hasOwnProperty(a)&&(d=enqueue(d,this._unmountChild(r[a],i[a])))}d&&processQueue(this,d);this._renderedChildren=u}},unmountChildren:function(e){var n=this._renderedChildren;ReactChildReconciler.unmountChildren(n,e);this._renderedChildren=null},moveChild:function(e,n,t,r){if(e._mountIndex<r){return makeMove(e,n,t)}},createChild:function(e,n,t){return makeInsertMarkup(t,n,e._mountIndex)},removeChild:function(e,n){return makeRemove(e,n)},_mountChildAtIndex:function(e,n,t,r,i,o){e._mountIndex=r;return this.createChild(e,t,n)},_unmountChild:function(e,n){var t=this.removeChild(e,n);e._mountIndex=null;return t}}};module.exports=ReactMultiChild;
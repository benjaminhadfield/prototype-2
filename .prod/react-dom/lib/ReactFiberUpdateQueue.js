"use strict";var _assign=require("object-assign");exports.createUpdateQueue=function(a){var l={partialState:a,callback:null,callbackWasCalled:!1,next:null,isReplace:!1,isForced:!1,tail:null};l.tail=l;return l};exports.addToQueue=function(a,l){var e={partialState:l,callback:null,callbackWasCalled:!1,next:null};a.tail.next=e;a.tail=e;return a};exports.addCallbackToQueue=function(a,l){a.tail.callback&&exports.addToQueue(a,null);a.tail.callback=l;return a};exports.callCallbacks=function(a,l){for(var e=a;e;){if(e.callback&&!e.callbackWasCalled){e.callbackWasCalled=!0;e.callback.call(l)}e=e.next}};exports.mergeUpdateQueue=function(a,l,e){for(var t=a,c=a.isReplace?null:_assign({},l);t;){var r=void 0;if("function"==typeof t.partialState){var n=t.partialState;r=n(c,e)}else{r=t.partialState}c=_assign(c||{},r);t=t.next}return c};